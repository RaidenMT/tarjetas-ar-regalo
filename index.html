<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">

    <title>Marker</title>

    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script src="./js/aframe-chromakey-material.min.js"></script>

    <script src="https://raw.githack.com/fcor/arjs-gestures/master/dist/gestures.js"></script>

    <!-- https://aframe.io/docs/1.1.0/introduction/writing-a-component.html -->
    <script>
        // AFRAME.registerComponent('video-player', {
        //     init: function () {
        //         this.el.setAttribute('src', '#video');
        //         this.el.setAttribute('width', '4');
        //         this.el.setAttribute('height', '2.25');
        //         this.el.setAttribute('position', '0 0 0');
        //         this.el.setAttribute('rotation', '-75 0 0');

        //         // this.el.object3D.position = '0 0 0';
        //         // this.el.object3D.rotation = '-45 0 0';
        //     }
        // });
    </script>

</head>


<!-- https://www.youtube.com/playlist?list=PL8MkBHej75fJD-HveDzm4xKrciC5VfYuV -->
<!-- https://github.com/mayognaise/aframe-gif-shader -->



<body style="margin: 0px; overflow: hidden;">

    <!-- https://medium.com/chialab-open-source/10-tips-to-enhance-your-ar-js-app-8b44c6faffca -->
    <a-scene embedded
        arjs="sourceType: webcam; sourceWidth: 1280; sourceHeight: 960; displayWidth: 1280; displayHeight: 960;"
        gesture-detector>

        <!-- https://www.youtube.com/watch?v=5KjyTU07EHo -->
        <!-- https://aframe.io/docs/1.1.0/guides/building-a-minecraft-demo.html#preloading-assets -->
        <!-- Assets Management System -->
        <a-assets>
            <video id="video" src="./assets/videos/fireworks.mp4" loop="true"></video>

            <img id="image1" src="./assets/images/foto-1.jpg" alt="Foto de Amponsah Nii Davidson en Pexels">
            <img id="image2" src="./assets/images/foto-2.jpg" alt="Foto de Tatiana Syrikova en Pexels">
            <img id="image3" src="./assets/images/foto-3.jpg" alt="Foto de Kampus Production en Pexels">
            <img id="image4" src="./assets/images/foto-4.jpg" alt="Foto de Kampus Production en Pexels">
            <img id="image5" src="./assets/images/foto-5.jpg" alt="Foto de Kenneth Carpina en Pexels">
            <img id="image6" src="./assets/images/foto-6.jpg" alt="Foto de Anna Shvets en Pexels">
            <img id="image7" src="./assets/images/foto-7.jpg" alt="Foto de Anna Shvets en Pexels">
            <img id="image8" src="./assets/images/foto-8.jpg" alt="Foto de Anna Shvets en Pexels">
            <img id="image9" src="./assets/images/foto-9.jpg" alt="Foto de The_MrDan en Pexels">
            <img id="image10" src="./assets/images/foto-10.jpg" alt="Foto de Sam Lion en Pexels">
            <img id="image11" src="./assets/images/foto-11.jpg" alt="Foto de Jasmine Carter en Pexels">
            <img id="image12" src="./assets/images/foto-12.jpg" alt="Foto de Shvets Anna en Pexels">
            <img id="image13" src="./assets/images/foto-13.jpg" alt="Foto de Helena Lopes en Pexels">
            <img id="image14" src="./assets/images/foto-14.jpg" alt="Foto de GUIVERG en Pexels">
            <img id="image15" src="./assets/images/foto-15.jpg" alt="Foto de August de Richelieu en Pexels">

            <a-asset-item id="cake1" src="./assets/models/cake-1.gltf"></a-asset-item>
            <a-asset-item id="cake2" src="./assets/models/cake-2.gltf"></a-asset-item>
            <a-asset-item id="heart" src="./assets/models/HEART.gltf" alt="Modelo de Aaron Clifford en Google Poly"></a-asset-item>
            <a-asset-item id="gift" src="./assets/models/gift.gltf" alt="Modelo de Aaron Clifford en Google Poly"></a-asset-item>
            <a-asset-item id="gift2" src="./assets/models/gift2.gltf" alt="Modelo de Jarlan Perez en Google Poly"></a-asset-item>
            <a-asset-item id="gift3" src="./assets/models/gift3.gltf" alt="Modelo de Jarlan Perez en Google Poly"></a-asset-item>
        </a-assets>

        <!-- https://medium.com/swlh/ar-js-the-simplest-way-to-get-cross-browser-augmented-reality-on-the-web-10cbc721debc -->
        <!-- https://github.com/jeromeetienne/AR.js/issues/164 -->
        <!-- https://www.youtube.com/watch?v=Kt5c3Z8odAo -->
        <!-- https://github.com/fcor/arjs-gestures -->
        <a-marker 
            preset="custom" 
            type="pattern" 
            url="./assets/markers/pattern-cake-slice.patt" 
            id="videoMarker"
            size="0.03"
            
            raycaster="objects: .clickable"
            emitevents="true"
            cursor="fuse: false; rayOrigin: mouse;"
            >

            <a-entity 
                material="shader: chromakey; src: #video; color: 0.0 0.0 0.0; side: double" 
                geometry="primitive: plane; height: 3; width: 3"
                rotation="-45 0 0"
                position="0 0 -2">
            </a-entity>

            <a-image 
                src="#image1"
                rotation="-90 0 0"
                width="2"
                height="2"
                id="imgRegalo"

                class="clickable"
                gesture-handler
            ></a-image>

            <a-entity 
                gltf-model="#cake1"
                scale="0.05 0.05 0.05"
                position="-1 0 -1"
            ></a-entity>

            <a-entity 
                gltf-model="#heart"
                position="1.8 0 1"
                rotation="-45 0 0"
                scale="0.008 0.008 0.008"
            ></a-entity>

            <a-entity 
                gltf-model="#gift"
                position="-1.8 0 0.6"
            ></a-entity>

            <a-entity 
                gltf-model="#gift2"
                position="0.3 0 0.8"
                rotation="0 0 0"
                scale="0.6 0.6 0.6"
            ></a-entity>

            <a-entity 
                gltf-model="#gift3"
                scale="0.6 0.6 0.6"
                rotation="0 -45 0"
                position="1.8 0 -0.8"
            ></a-entity>
        </a-marker>

        <a-entity camera></a-entity>

    </a-scene>

    <script src="./js/index.js"></script>

</body>

</html>